#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>

#define PORT 8081
#define SERVER_IP "127.0.0.1"

int main() {
    int client_socket;
    struct sockaddr_in server_address;
    char buffer[1024] = {0};

    // Creating socket file descriptor
    if ((client_socket = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
        perror("Socket creation failed");
        exit(EXIT_FAILURE);
    }

    server_address.sin_family = AF_INET;
    server_address.sin_port = htons(PORT);

    // Convert IPv4 and IPv6 addresses from text to binary form
    if (inet_pton(AF_INET, SERVER_IP, &server_address.sin_addr) <= 0) {
        perror("Invalid address/ Address not supported");
        exit(EXIT_FAILURE);
    }

    // Connecting to the server
    if (connect(client_socket, (struct sockaddr *)&server_address, sizeof(server_address)) < 0) {
        perror("Connection Failed");
        exit(EXIT_FAILURE);
    }

    // Sending a message to the server
    const char *message = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut tincidunt risus quam, eget facilisis mi ultrices id. Proin bibendum nisi non porta molestie. Vestibulum nec lorem eget lorem ultricies viverra sagittis id risus. Proin at suscipit ante, vitae ultrices quam. Vivamus molestie elit tempor, rhoncus erat sit amet, viverra mauris. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.\nInteger posuere diam vitae ipsum egestas, a pellentesque nunc varius. Suspendisse tempus convallis turpis, ut egestas ante sagittis nec. Fusce mauris mauris, dictum ut erat a, lobortis dapibus arcu. Ut feugiat rhoncus libero. Pellentesque elementum velit quis tortor malesuada dignissim. Cras odio turpis, malesuada sed lacus non, lobortis lacinia est. Sed dignissim nulla aliquam, malesuada felis eget, molestie tellus. Duis dapibus maximus tellus sed posuere. Integer tincidunt rutrum euismod. Nunc metus sapien, tempor at vulputate sit amet, aliquam ultricies urna. Morbi arcu turpis, egestas a faucibus eu, lobortis vitae risus. Sed elementum velit sit amet facilisis maximus. Praesent in tellus ante. Ut rhoncus ex ut odio cursus, at vulputate lacus rutrum. Aliquam accumsan, ex eget posuere suscipit, lectus neque cursus sem, vel convallis magna lorem quis lectus.\nFusce interdum, augue sit amet volutpat placerat, mauris lorem accumsan ex, non ultrices lorem ipsum in lorem. Maecenas mattis dictum nisl a maximus. Praesent tincidunt vel tortor sed volutpat. Nam tincidunt arcu et sapien congue, sed tristique tortor malesuada. Nam efficitur nibh vel arcu bibendum sollicitudin. Donec venenatis diam ut nisl convallis, vitae lobortis lorem rutrum. Vestibulum eleifend lectus sit amet est gravida, non tincidunt est aliquet. Vivamus viverra arcu quis purus ultrices malesuada. Nam sem lorem, posuere ut ligula ac, convallis vestibulum neque.\nQuisque at sapien non massa porttitor dapibus. Donec eget facilisis sem. Quisque id laoreet orci. Aliquam libero augue, tempor quis dignissim pretium, dictum eu odio. Morbi eget euismod felis, ultricies mollis tortor. Nunc lacinia enim enim, sed ultricies lorem gravida et. Mauris vel congue sem. Nulla nec mi quis lorem interdum rutrum. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc eleifend metus id lacus dapibus, efficitur ultricies purus consectetur. Sed dictum dignissim mauris non posuere. Cras mollis ligula ut euismod feugiat. Etiam ultricies tellus sit amet urna tempus, sed iaculis metus pharetra. Mauris ut est nunc. Quisque egestas velit ex, non accumsan nisl varius eu. Proin fringilla velit tempor ex tristique tincidunt.\nPhasellus placerat odio vitae sapien ultrices blandit. Nulla facilisi. Vivamus vel sapien eget risus interdum aliquam. Praesent non ex diam. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nullam ornare volutpat nisl, id luctus est bibendum ac. Cras sed neque purus. Aenean a neque nibh. Aenean condimentum lobortis est vel aliquet. Nullam porta a mi vitae porta. Nunc nec tempor nibh, sed facilisis ante. Nam aliquam urna ac tortor dictum feugiat. Duis accumsan diam nec nisi semper, ut scelerisque libero eleifend. Maecenas pulvinar arcu eu est dapibus, elementum porttitor odio fermentum. Aliquam laoreet, ex ut pharetra lobortis, justo nisl pretium sapien, ut mattis tellus felis non tellus. Quisque at consequat risus. \nLorem ipsum dolor sit amet, consectetur adipiscing elit. Ut tincidunt risus quam, eget facilisis mi ultrices id. Proin bibendum nisi non porta molestie. Vestibulum nec lorem eget lorem ultricies viverra sagittis id risus. Proin at suscipit ante, vitae ultrices quam. Vivamus molestie elit tempor, rhoncus erat sit amet, viverra mauris. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.\nInteger posuere diam vitae ipsum egestas, a pellentesque nunc varius. Suspendisse tempus convallis turpis, ut egestas ante sagittis nec. Fusce mauris mauris, dictum ut erat a, lobortis dapibus arcu. Ut feugiat rhoncus libero. Pellentesque elementum velit quis tortor malesuada dignissim. Cras odio turpis, malesuada sed lacus non, lobortis lacinia est. Sed dignissim nulla aliquam, malesuada felis eget, molestie tellus. Duis dapibus maximus tellus sed posuere. Integer tincidunt rutrum euismod. Nunc metus sapien, tempor at vulputate sit amet, aliquam ultricies urna. Morbi arcu turpis, egestas a faucibus eu, lobortis vitae risus. Sed elementum velit sit amet facilisis maximus. Praesent in tellus ante. Ut rhoncus ex ut odio cursus, at vulputate lacus rutrum. Aliquam accumsan, ex eget posuere suscipit, lectus neque cursus sem, vel convallis magna lorem quis lectus.\nFusce interdum, augue sit amet volutpat placerat, mauris lorem accumsan ex, non ultrices lorem ipsum in lorem. Maecenas mattis dictum nisl a maximus. Praesent tincidunt vel tortor sed volutpat. Nam tincidunt arcu et sapien congue, sed tristique tortor malesuada. Nam efficitur nibh vel arcu bibendum sollicitudin. Donec venenatis diam ut nisl convallis, vitae lobortis lorem rutrum. Vestibulum eleifend lectus sit amet est gravida, non tincidunt est aliquet. Vivamus viverra arcu quis purus ultrices malesuada. Nam sem lorem, posuere ut ligula ac, convallis vestibulum neque.\nQuisque at sapien non massa porttitor dapibus. Donec eget facilisis sem. Quisque id laoreet orci. Aliquam libero augue, tempor quis dignissim pretium, dictum eu odio. Morbi eget euismod felis, ultricies mollis tortor. Nunc lacinia enim enim, sed ultricies lorem gravida et. Mauris vel congue sem. Nulla nec mi quis lorem interdum rutrum. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc eleifend metus id lacus dapibus, efficitur ultricies purus consectetur. Sed dictum dignissim mauris non posuere. Cras mollis ligula ut euismod feugiat. Etiam ultricies tellus sit amet urna tempus, sed iaculis metus pharetra. Mauris ut est nunc. Quisque egestas velit ex, non accumsan nisl varius eu. Proin fringilla velit tempor ex tristique tincidunt.\nPhasellus placerat odio vitae sapien ultrices blandit. Nulla facilisi. Vivamus vel sapien eget risus interdum aliquam. Praesent non ex diam. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nullam ornare volutpat nisl, id luctus est bibendum ac. Cras sed neque purus. Aenean a neque nibh. Aenean condimentum lobortis est vel aliquet. Nullam porta a mi vitae porta. Nunc nec tempor nibh, sed facilisis ante. Nam aliquam urna ac tortor dictum feugiat. Duis accumsan diam nec nisi semper, ut scelerisque libero eleifend. Maecenas pulvinar arcu eu est dapibus, elementum porttitor odio fermentum. Aliquam laoreet, ex ut pharetra lobortis, justo nisl pretium sapien, ut mattis tellus felis non tellus. Quisque at consequat risus. \nLorem ipsum dolor sit amet, consectetur adipiscing elit. Ut tincidunt risus quam, eget facilisis mi ultrices id. Proin bibendum nisi non porta molestie. Vestibulum nec lorem eget lorem ultricies viverra sagittis id risus. Proin at suscipit ante, vitae ultrices quam. Vivamus molestie elit tempor, rhoncus erat sit amet, viverra mauris. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.\nInteger posuere diam vitae ipsum egestas, a pellentesque nunc varius. Suspendisse tempus convallis turpis, ut egestas ante sagittis nec. Fusce mauris mauris, dictum ut erat a, lobortis dapibus arcu. Ut feugiat rhoncus libero. Pellentesque elementum velit quis tortor malesuada dignissim. Cras odio turpis, malesuada sed lacus non, lobortis lacinia est. Sed dignissim nulla aliquam, malesuada felis eget, molestie tellus. Duis dapibus maximus tellus sed posuere. Integer tincidunt rutrum euismod. Nunc metus sapien, tempor at vulputate sit amet, aliquam ultricies urna. Morbi arcu turpis, egestas a faucibus eu, lobortis vitae risus. Sed elementum velit sit amet facilisis maximus. Praesent in tellus ante. Ut rhoncus ex ut odio cursus, at vulputate lacus rutrum. Aliquam accumsan, ex eget posuere suscipit, lectus neque cursus sem, vel convallis magna lorem quis lectus.\nFusce interdum, augue sit amet volutpat placerat, mauris lorem accumsan ex, non ultrices lorem ipsum in lorem. Maecenas mattis dictum nisl a maximus. Praesent tincidunt vel tortor sed volutpat. Nam tincidunt arcu et sapien congue, sed tristique tortor malesuada. Nam efficitur nibh vel arcu bibendum sollicitudin. Donec venenatis diam ut nisl convallis, vitae lobortis lorem rutrum. Vestibulum eleifend lectus sit amet est gravida, non tincidunt est aliquet. Vivamus viverra arcu quis purus ultrices malesuada. Nam sem lorem, posuere ut ligula ac, convallis vestibulum neque.\nQuisque at sapien non massa porttitor dapibus. Donec eget facilisis sem. Quisque id laoreet orci. Aliquam libero augue, tempor quis dignissim pretium, dictum eu odio. Morbi eget euismod felis, ultricies mollis tortor. Nunc lacinia enim enim, sed ultricies lorem gravida et. Mauris vel congue sem. Nulla nec mi quis lorem interdum rutrum. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc eleifend metus id lacus dapibus, efficitur ultricies purus consectetur. Sed dictum dignissim mauris non posuere. Cras mollis ligula ut euismod feugiat. Etiam ultricies tellus sit amet urna tempus, sed iaculis metus pharetra. Mauris ut est nunc. Quisque egestas velit ex, non accumsan nisl varius eu. Proin fringilla velit tempor ex tristique tincidunt.\nPhasellus placerat odio vitae sapien ultrices blandit. Nulla facilisi. Vivamus vel sapien eget risus interdum aliquam. Praesent non ex diam. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nullam ornare volutpat nisl, id luctus est bibendum ac. Cras sed neque purus. Aenean a neque nibh. Aenean condimentum lobortis est vel aliquet. Nullam porta a mi vitae porta. Nunc nec tempor nibh, sed facilisis ante. Nam aliquam urna ac tortor dictum feugiat. Duis accumsan diam nec nisi semper, ut scelerisque libero eleifend. Maecenas pulvinar arcu eu est dapibus, elementum porttitor odio fermentum. Aliquam laoreet, ex ut pharetra lobortis, justo nisl pretium sapien, ut mattis tellus felis non tellus. Quisque at consequat risus. \n";
    send(client_socket, message, strlen(message), 0);
    printf("Message sent to server: %s\n", message);

    // Receiving a message from the server
    read(client_socket, buffer, sizeof(buffer));
    printf("Message from server: %s\n", buffer);

    close(client_socket);

    return 0;
}
